(()=>{var e={738:(e,t,n)=>{const r=n(147),o=n(17),i=n(37);function s(e){console.log(`[dotenv][DEBUG] ${e}`)}const a=/^\s*([\w.-]+)\s*=\s*(.*)?\s*$/,d=/\\n/g,l=/\r\n|\n|\r/;function p(e,t){const n=Boolean(t&&t.debug),r={};return e.toString().split(l).forEach((function(e,t){const o=e.match(a);if(null!=o){const e=o[1];let t=o[2]||"";const n=t.length-1,i='"'===t[0]&&'"'===t[n];"'"===t[0]&&"'"===t[n]||i?(t=t.substring(1,n),i&&(t=t.replace(d,"\n"))):t=t.trim(),r[e]=t}else n&&s(`did not match key and value when parsing line ${t+1}: ${e}`)})),r}e.exports.config=function(e){let t=o.resolve(process.cwd(),".env"),n="utf8",a=!1;var d;e&&(null!=e.path&&(t="~"===(d=e.path)[0]?o.join(i.homedir(),d.slice(1)):d),null!=e.encoding&&(n=e.encoding),null!=e.debug&&(a=!0));try{const e=p(r.readFileSync(t,{encoding:n}),{debug:a});return Object.keys(e).forEach((function(t){Object.prototype.hasOwnProperty.call(process.env,t)?a&&s(`"${t}" is already defined in \`process.env\` and will not be overwritten`):process.env[t]=e[t]})),{parsed:e}}catch(e){return{error:e}}},e.exports.parse=p},147:e=>{"use strict";e.exports=require("fs")},37:e=>{"use strict";e.exports=require("os")},17:e=>{"use strict";e.exports=require("path")}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=require("http");var t=n(738);const r=require("url"),o=require("crypto");var i=n.n(o);const s=new Uint8Array(256);let a=s.length;function d(){return a>s.length-16&&(i().randomFillSync(s),a=0),s.slice(a,a+=16)}const l=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,p=function(e){return"string"==typeof e&&l.test(e)},c=[];for(let e=0;e<256;++e)c.push((e+256).toString(16).substr(1));const f=function(e,t,n){const r=(e=e||{}).random||(e.rng||d)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return function(e,t=0){const n=(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase();if(!p(n))throw TypeError("Stringified UUID is invalid");return n}(r)};class u{constructor(e,t,n){this.id=f(),this.name=e,this.age=t,this.hobbies=n}}t.config();const g="localhost",h=process.env.PORT,y=[];function w(e){return p(e)}e.createServer(((e,t,n)=>{console.log("Request for "+e.url+" by method "+e.method);const o=r.parse(e.url,!0).path,[,i,s]=o.split("/");if("person"!==i&&(t.writeHead(404,"Page is not found",{"Content-Type":"text"}),t.write("Page is not found"),t.end()),"GET"===e.method&&"person"===i)if(s)if(w(s))if(y.filter((e=>e.id===s))){const e=y.filter((e=>e.id===s));t.writeHead(200,{"Content-Type":"application/json"}),t.end(JSON.stringify(e,null,!0))}else t.writeHead(404,{"Content-Type":"HTML/text"}),t.write("Person is not found"),t.end();else t.writeHead(400,{"Content-Type":"HTML/text"}),t.write("Invalid id"),t.end();else t.writeHead(200,{"Content-Type":"application/json"}),t.end(JSON.stringify(y,null,!0));if("POST"===e.method&&"person"===i){let n="";e.on("data",(e=>{n+=e})),e.on("end",(()=>{let e=JSON.parse(n);if(function(e){if("string"==typeof e.name&&"number"==typeof e.age&&3===Object.keys(e).length){if(Array.isArray(e.hobbies)){let t=e.hobbies,n=t.length;for(;n--;)if("string"!=typeof t[n])return!1}return!0}return!1}(e)){let n=new u(e.name,e.age,e.hobbies);y.push(n),t.writeHead(201,{"Content-Type":"application/json"}),t.end(JSON.stringify(n,null,!0))}else t.writeHead(400,{"Content-Type":"HTML/text"}),t.write("Wrong person properties"),t.end()}))}if("PUT"===e.method&&"person"===i)if(s)if(w(s)){let n="";e.on("data",(e=>{n+=e})),e.on("end",(()=>{let e=JSON.parse(n);y.filter((e=>e.id===s))?(y.forEach(((t,n)=>{t.id===s&&(y[n].name=e.name,y[n].age=e.age,y[n].hobbies=e.hobbies)})),t.writeHead(200,{"Content-Type":"application/json"}),t.end(JSON.stringify(y.filter((e=>e.id===s)),null,!0))):(t.writeHead(404,{"Content-Type":"HTML/text"}),t.write("Person is not found"),t.end())}))}else t.writeHead(400,{"Content-Type":"HTML/text"}),t.write("Invalid id"),t.end();else t.writeHead(404,{"Content-Type":"application/json"}),t.write("Page is not found"),t.end();if("DELETE"===e.method&&"person"===i)if(s)if(w(s))for(let e in y)y[e].id===s?(y.splice(y.indexOf(y[e]),1),t.writeHead(204,{"Content-Type":"HTML/text"}),t.end()):(t.writeHead(404,{"Content-Type":"HTML/text"}),t.write("Person is not found"),t.end());else t.writeHead(400,{"Content-Type":"HTML/text"}),t.write("Invalid id"),t.end();else t.writeHead(404,{"Content-Type":"HTML/text"}),t.write("Page is not found"),t.end();n&&(t.writeHead(500,{"Content-Type":"HTML/text"}),t.write("Something went wrong!"),t.end())})).listen(h,g,(()=>{console.log(`Server running at http://${g}:${h}`)}))})()})();